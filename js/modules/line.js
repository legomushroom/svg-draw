// Generated by CoffeeScript 1.6.2
(function() {
  define('line', ['helpers'], function(helpers) {
    var Line;

    return Line = (function() {
      function Line(o) {
        this.o = o != null ? o : {};
        this.SVG = this.o.SVG;
        this.id = helpers.genHash();
        this.points = [];
        this.addDomElement();
        this;
      }

      Line.prototype.addDomElement = function() {
        var attr;

        attr = {
          id: this.id,
          d: '',
          stroke: '#00DFFC',
          'stroke-width': 2,
          fill: 'none',
          'marker-mid': 'url(#marker-mid)'
        };
        this.line = this.SVG.createElement('path', attr);
        this.serialize();
        return this.SVG.lineToDom(this.id, this.line);
      };

      Line.prototype.serialize = function() {
        var i, point, str, _i, _len, _ref;

        str = '';
        _ref = this.points;
        for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
          point = _ref[i];
          if (i === 0) {
            str += "M" + point.x + "," + point.y + " ";
          }
          str += point.type == null ? "L " + point.x + ", " + point.y : str += "a1,1 0 0,1 " + App.gs + ",0";
        }
        this.SVG.setAttribute.call(this.line, 'd', str);
        return this;
      };

      return Line;

    })();
  });

}).call(this);
